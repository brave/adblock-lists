! Possibly fixed filter for YT.
! From: https://github.com/AdguardTeam/AdguardFilters/pull/172976
! Discussion: https://github.com/brave/brave-browser/issues/36244#issuecomment-1955943465
! ||googlevideo.com/videoplayback*ctier=L&*%2Cctier%2C

! counter page visibility checks on youtube.com/twitch
tv.youtube.com,www.youtube.com,m.youtube.com##+js(brave-video-bg-play)

podcasts-online.org,podbay.fm,spreaker.com,player.fm,tuner.bonneville.com,kera.org,wnyc.org,wqxr.org,kusc.org,kdfc.com,wfmt.com,wfmu.org,radiolisten.de,ascoltareradio.com,ieradio.org,radios.lu,nederlandseradio.nl,nettradionorge.com,radio.org.se,radio.pp.ru,onlineradio.pl,radioonline.com.pt,emisora.org.es,radio.co.dk,radios.co.at,ukradiolive.com,fmstream.org,listnr.com,totallyradio.com.au,tv.youtube.com,www.youtube.com,m.youtube.com,plex.tv,gaana.com,jiosaavn.com,play.anghami.com,app.idagio.com,wynk.in,radio.de,fanatiz.com,spectrumsportsnet.com,tntdrama.com,ballysports.com,nba.com,altitudenow.com##+js(brave-disable-pageview-api)
!
! Google precision popup
www.google.com,www.google.ca,www.google.com.au,www.google.co.nz,www.google.co.uk,www.google.ie,www.google.fr,www.google.nl,www.google.pt,www.google.de##.gTMtLb.fp-nh[style="visibility: visible;"]
! Google precision popup (Fix disabled scroll)
www.google.com,www.google.ca,www.google.com.au,www.google.co.nz,www.google.co.uk,www.google.ie,www.google.fr,www.google.nl,www.google.pt,www.google.de##html.TaoyYc:style(position: static !important; overflow: auto !important; width: auto !important;)

! www.youtube.com#@#+js(trusted-rpnt, script, (function() {window.ytplayer=, /*start*/(()=>{let t=document.location.href\,e=[]\,n=[]\,o=!1\,r="";const i=Array.prototype.push\,a={apply:(t\,r\,a)=>(window.yt?.config_?.EXPERIMENT_FLAGS?.html5_enable_ssap_entity_id&&a[0]&&a[0]!==window&&"number"==typeof a[0].start&&a[0].end&&"ssap"===a[0].namespace&&a[0].id&&(o||0!==a[0]?.start||n.includes(a[0].id)||(e.length=0\,n.length=0\,o=!0\,i.call(e\,a[0])\,i.call(n\,a[0].id))\,o&&0!==a[0]?.start&&!n.includes(a[0].id)&&(i.call(e\,a[0])\,i.call(n\,a[0].id)))\,Reflect.apply(t\,r\,a))};window.Array.prototype.push=new Proxy(window.Array.prototype.push\,a)\,document.addEventListener("DOMContentLoaded"\,(function(){if(!window.yt?.config_?.EXPERIMENT_FLAGS?.html5_enable_ssap_entity_id)return;const i=()=>{const t=document.querySelector("video");if(t&&e.length){const i=Math.round(t.duration)\,a=Math.round(e.at(-1).end/1e3)\,c=n.join("\,");if(!1===t.loop&&r!==c&&i&&i===a){const n=e.at(-1).start/1e3;t.currentTime<n&&(t.currentTime=n\,o=!1\,r=c)}else if(!0===t.loop&&i&&i===a){const n=e.at(-1).start/1e3;t.currentTime<n&&(t.currentTime=n\,o=!1\,r=c)}}};i();new MutationObserver((()=>{t!==document.location.href?(t=document.location.href\,e.length=0\,n.length=0\,o=!1\,i()):i()})).observe(document\,{childList:!0\,subtree:!0})}))})();if(window.trustedTypes){const escapeHTMLPolicy=trustedTypes.createPolicy("myEscapePolicy"\,{createScript:string=>string.replace(/\/\*start\*\/(.*)\/\*end\*\//g\,"")});document.currentScript.textContent=escapeHTMLPolicy.createScript(document.currentScript.textContent);}else{document.currentScript.textContent=document.currentScript.textContent.replace(/\/\*start\*\/(.*)\/\*end\*\//g\,"");}/*end*/(function() {window.ytplayer=, sedCount, 1)
! https://github.com/uBlockOrigin/uAssets/issues/20586#issuecomment-2267209309
! www.youtube.com##+js(trusted-rpnt, script, (function() {window.ytplayer=, '/*start*/(()=>{let t=document.location.href;let e=[];let n=[];let o=false;let r="";const i=Array.prototype.push;const a={apply:(t,r,a)=>{if(window.yt?.config_?.EXPERIMENT_FLAGS?.html5_enable_ssap_entity_id&&a[0]&&a[0]!==window&&typeof a[0].start=="number"&&a[0].end&&a[0].namespace==="ssap"&&a[0].id){if(!o&&a[0]?.start===0&&!n.includes(a[0].id)){e.length=0;n.length=0;o=true;i.call(e,a[0]);i.call(n,a[0].id)}if(o&&a[0]?.start!==0&&!n.includes(a[0].id)){i.call(e,a[0]);i.call(n,a[0].id)}}return Reflect.apply(t,r,a)}};window.Array.prototype.push=new Proxy(window.Array.prototype.push,a);document.addEventListener("DOMContentLoaded",(function(){if(!window.yt?.config_?.EXPERIMENT_FLAGS?.html5_enable_ssap_entity_id){return}const i=()=>{const video=document.querySelector("video");if(video&&e.length){const i=Math.round(video.duration);const a=Math.round(e.at(-1).end/1e3);const c=n.join(",");console.log(video.currentTime,r,c,t,i,a,"uBO - currentTime");if(video.loop===false&&r!==c&&i&&i===a){const adsTime=e.at(-1).start/1e3;console.log(JSON.stringify(e),JSON.stringify(n),r,adsTime,video.currentTime,t,"uBO - old/new IDs");if(video.currentTime<adsTime){document.getElementById("movie_player").seekTo(adsTime);o=false;r=c}}else if(video.loop===true&&i&&i===a){const adsTime=e.at(-1).start/1e3;if(video.currentTime<adsTime){document.getElementById("movie_player").seekTo(adsTime);o=false;r=c}}else if(video.currentTime.toString()==="0.001"&&i&&i===a){const adsTime=e.at(-1).start/1e3;console.log(JSON.stringify(e),JSON.stringify(n),r,adsTime,video.currentTime,t,"uBO - 0.001");if(video.currentTime<adsTime){document.getElementById("movie_player").seekTo(adsTime);o=false;r=c}}}};i();new MutationObserver((()=>{if(t!==document.location.href){t=document.location.href;e.length=0;n.length=0;o=false;i()}else{i()}})).observe(document,{childList:true,subtree:true})}))})();document.currentScript.textContent=document.currentScript.textContent.replace(/\/\*start\*\/(.*)\/\*end\*\//g,"");/*end*/(function() {window.ytplayer=', sedCount, 1)
www.youtube.com##+js(nano-stb, [native code], 17000, 0.001)


! youtube self nag screens
www.youtube.com##tp-yt-paper-dialog[style-target="host"][role="dialog"][tabindex][syle*="border-box; max-height: 191"]
www.youtube.com##tp-yt-paper-dialog[style-target="host"][role="dialog"][tabindex][syle*="border-box; max-height: 192"]
! Youtube: How are your recommendations today?
www.youtube.com##tp-yt-paper-dialog[style-target="host"][role="dialog"][tabindex][syle*="border-box; max-height: 320px;"]
! its cable reimagined
www.youtube.com##tp-yt-paper-dialog[style-target="host"][role="dialog"][tabindex][syle*="border-box; max-height: 206"]
! Youtube music popup
music.youtube.com##ytmusic-mealbar-promo-renderer.ytmusic-popup-container[enable-bauhaus-style][dialog="true"][tabindex]


! alt rule
! twitch.tv##+js(video-swap-new-ublock-origin)
! Test Twitch.tv rule
twitch.tv##+js(vaft-ublock-origin)

! filters.txt
*_ad_$media,domain=youtube.com,3p
! Youtube Original (based on https://github.com/sepehrkiller/FixYoutubeUI/)
! Old UI
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_grid, false)

! Fix Video being Too Big on the old UI (right side of the video & FullScreen button is cut-off without these filters)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_page_columns_top_padding, 24)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_page_horizontal_margin, 24)


! Fix Comment Section bugs (profile pictures being small, comments being weird, ...)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.small_avatars_for_comments, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.small_avatars_for_comments_ep, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_compact_comments, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_compact_comments_header, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.optimal_reading_width_comments_ep, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_comments_panel_button, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_comments_ep_disable_theater, true)

! fix Live Chat on old UI (haven't tested these)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.live_chat_over_engagement_panels, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.live_chat_scaled_height, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.live_chat_smaller_min_height, false)

! add Volume control to Youtube Shorts (Experimental Youtube feature that's disabled by default)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.desktop_shorts_volume_controls, true)

! others (don't know what these ones do but they are Experimental Flags
! and based on my research they shouldn't be enabled (or disabled)
! if you know what they do let me know) (feel free to delete these or experiment with them)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_grid_hide_chips, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_grid_reduced_top_margin_rich_grid, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.swatcheroo_direct_use_rich_grid, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.main_app_sink_wrapper_batch_1, true)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.reels_web_disable_persistent_guide_shorts, true)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_enable_deeper_metadata_highlight_styling, true)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_player_enable_featured_product_banner_exclusives_on_desktop, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.main_app_controller_extraction_batch_18, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.main_app_controller_extraction_batch_19, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.no_iframe_for_web_stickiness, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.remove_masthead_channel_banner_on_refresh, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_theater_chat, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_theater_fixed_chat, false)
! extra
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.fill_view_models_on_web_vod, true)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_rounded_thumbnails, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_rounded_player_large, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.kevlar_watch_max_player_width, 1280)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.web_watch_log_theater_mode, false)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.wn_grid_max_item_width, 0)
www.youtube.com##+js(set, yt.config_.EXPERIMENT_FLAGS.wn_grid_min_item_width, 0)

! LinkedIn News Module Puzzles
linkedin.com##div:has(> h3#news-module__title-today-puzzles)
linkedin.com##ul:has(li[class="news-module__puzzle"])
